<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	template="/template/template.xhtml">



<ui:define name="content" >
<div>

<h1> <center>Register as a Visitor</center> </h1>
</div>
<div class="col-sm-2"></div>
<div >
<h:form enctype="multipart/form-data">




<div class="form-group">

</div>
 <p:messages id="msgs" />
<div class="form-group">
<h:outputText value="FirstName"  styleClass="control-label col-md-4"/>
<div class="col-md-8">
<p:inputText id="firstname"  value="#{memberManagmentBean.member.firstName}"  
required="true"
requiredMessage="*The firstname field is required"
/>
<p:message for="firstname" style="color: red"/>
</div>

</div>

<div class="form-group">
<h:outputText value="LastName"  styleClass="control-label col-md-4"/>
 <div class="col-md-8">
<p:inputText id="lastname" value="#{memberManagmentBean.member.lastName}" 

required="true"
requiredMessage="*The lastname field is required"
 />
 <p:message for="lastname" style="color: red"/>
</div>

</div>

<div class="form-group">
<h:outputText value="Birth Date" styleClass="control-label col-md-4"/>
 <div class="col-md-8">
<p:calendar value="#{memberManagmentBean.member.birthDate}"   
id="popup"
required="true"
requiredMessage="*The Birth Date field is required"
pattern="dd-MM-yyyy"
>

</p:calendar> 
 <p:message for="popup" style="color: red"/>
</div>
</div>

<div class="form-group">
<h:outputText value="Gender" styleClass="control-label col-md-4"/>
 <div class="col-md-8">
<h:selectOneMenu value="#{memberManagmentBean.member.gender}" styleClass="form-control"
id="gender" 
required="true"
requiredMessage="*The Gender field is required"
style="width: 200px;"
>
<f:selectItem itemLabel="Select  gender" itemValue=""/>
<f:selectItems value="#{myData.genders}"/>
</h:selectOneMenu>
 <p:message for="gender" style="color: red"/>
</div>
</div>

<div class="form-group">
<h:outputText   value="Email" styleClass="control-label col-md-4"/>
 <div class="col-md-8">
 <h:outputText id="outEmail" value="#{memberManagmentBean.emailCheckMessage}" style="color:red" />
 
<p:inputText id="email" value="#{memberManagmentBean.member.email}" 
required="true"
requiredMessage="*The Email field is required"
validatorMessage="*Email not valide."
>
<f:validateRegex pattern=".+\@.+\..+" />
<p:ajax event="keyup" update="outEmail" listener="#{memberManagmentBean.checkEmail(memberManagmentBean.member.email)}" />
</p:inputText>
<p:message for="email" style="color: red" />

</div>
</div>


<div class="form-group">

<h:outputText value="Login" styleClass="control-label col-md-4"/>
 <div class="col-md-8">
 <h:outputText id="outLogin" value="#{memberManagmentBean.loginCheckMessage}" style="color:red" />
 
<p:inputText value="#{memberManagmentBean.member.login}" 
id="login" 
required="true"
requiredMessage="*The login field is required"
>
 <f:validateLength minimum="4" for="login"/>
<p:ajax event="keyup" update="outLogin" listener="#{memberManagmentBean.checkLogin(memberManagmentBean.member.login)}" />
</p:inputText>

<p:message for="login" style="color: red" />
</div>
</div>
<div class="form-group">


</div>



<!-- <div class="form-group"> -->
<!-- <h:outputText value="Role" styleClass="control-label col-md-4" /> -->
<!--  <div class="col-md-8"> -->
<!-- <h:selectOneMenu value="#{memberManagmentBean.member.role}"  styleClass="form-control" -->
<!--    id="role"  -->
<!-- required="true" -->
<!-- requiredMessage="*The role field is required" -->
<!-- style="width:200px" -->
<!-- > -->
<!-- <f:selectItem itemLabel="Select a role" itemValue=""/> -->
<!-- <f:selectItems value="#{myData.roles}"/> -->
<!-- </h:selectOneMenu> -->
<!--    <p:message for="role" style="color: red"/> -->
<!-- </div> -->
<!-- </div> -->



   

<div class="form-group">
<h:outputText value="Photo"  styleClass="control-label col-md-2"/>
 <div class="col-md-2">
   <h:inputFile value="#{memberManagmentBean.file}"
   id="photo" 
>
        <f:ajax listener="#{memberManagmentBean.save()}" />
    </h:inputFile>
    <h:message for="photo" style="color: red"/>
</div>
 <div class="col-md-8">
 <div class="con">
 <img id="mypic"  src="http://localhost:8081/RefugeeCampProjectJEE/profilepics/#{memberManagmentBean.member.login}" style="width:200px;hight:200px"/>
 </div>
 </div>
</div>

<div class="form-group">
 <div class="col-md-4">
 </div>
 <div class="col-md-4">
<h:commandButton action="#{memberManagmentBean.addNewVisitor()}" value="Rgister" styleClass="btn btn-default"  />
</div>
</div>

</h:form>
</div>
<br />

<div><p><center>Refugee Camp</center></p></div>
</ui:define>
</ui:composition>
